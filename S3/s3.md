
### 参数设置 Set Paramter
```
bucketregion=cn-north-1
bucketname=
filename=
```
```
regions=($(aws ec2 describe-regions --query 'Regions[*].RegionName' --output text --region=$region))
localfile=td-agent.conf
s3uri=s3://tempfiles-london/td-agent.conf
```
###  create a bucket
```
aws s3api create-bucket \
    --bucket $bucketname \
    --region $bucketregion
```
```
aws s3api create-bucket \
    --bucket $bucketname \
    --region $bucketregion \
    --create-bucket-configuration LocationConstraint=$bucketregion
   ```
###  upload file
```
aws s3 cp $filename s3://$bucketname/ --region=$bucketregion
```
###  upload folder
```
aws s3 cp local_folder_name s3://s3_bucket_name/local_folder_name/ --recursive
```
### 参数设置
```
region=eu-west-2
s3uri='s3://aes-siem-295158943844-log/UserLogs/imperva/waf/'
filename=imperva-waf-sample-log
```
```
aws s3 cp $filename $s3uri --region=$region
```

###  [download file](https://docs.aws.amazon.com/cli/latest/reference/s3/cp.html)
```
aws s3 cp $s3uri $localfile
```

###  list objects
```
aws s3api list-objects --bucket=$bucketname --query 'Contents[].Key' --output text
```
###  list objs in multiple buckets
```
bucketnames=($(aws s3api list-buckets --query "Buckets[].Name" --output=text))
for bucketname in $bucketnames;do
echo $bucketname
key=$(aws s3api list-objects --bucket $bucketname --query 'Contents[].Key' --output text)
echo $key
done
```

###  delete a file
```
aws s3api delete-object --bucket=$bucketname --key=$filename
```
###  delete buckets
```
bucketnames=($(aws s3api list-buckets --query 'Buckets[?Name<`aws-security-data-lake-us-west-2`].Name' --output text))
len=${#bucketnames[*]}
```
```
for ((i=1; i<=len; i++));do
aws s3 rb s3://$bucketnames[i] --force
done
```
